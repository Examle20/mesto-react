{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/Input.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/EditAvatarPopup.js","components/CardDeletePopup.js","utils/api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","card","isOwn","owner","_id","basketButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","style","backgroundImage","link","backgroundPosition","backgroundRepeat","backgroundSize","alt","onClick","onCardClick","type","onBasketClick","onCardDelete","name","onCardLike","aria-label","length","Main","onEditAvatar","src","avatar","onEditProfile","about","onAddPlace","isLoading","cards","map","item","Footer","Date","getFullYear","ImagePopup","classNameOpen","isOpen","useEffect","onEscClose","onOverlayClose","onClose","PopupWithForm","buttonInactive","isButtonActive","useState","buttonDisabled","setButtonDisabled","elementsRef","useRef","current","checkValidity","onButtonActive","ref","action","noValidate","onSubmit","children","disabled","buttonTitle","load","title","Input","memo","errorMessage","setErrorMessage","handleChange","e","console","log","target","value","trim","onChange","validationMessage","id","placeholder","minLength","maxLength","required","autoComplete","onPaste","contentEditable","EditProfilePopup","setName","description","setDescription","preventDefault","onUpdateUser","xName","AddPlacePopup","setTitle","setLink","EditAvatarPopup","onUpdateAvatar","CardDeletePopup","api","baseUrl","headers","authorization","contentType","this","_baseUrl","_authorization","_contentType","fetch","then","res","ok","json","Promise","reject","status","method","body","JSON","stringify","removeLike","putLike","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isCardDeletePopupOpen","setIsCardDeletePopupOpen","selectedCard","setSelectedCard","isPopupWithImageOpen","setIsPopupWithImageOpen","setCurrentUser","selectedDeletionCard","setSelectedDeletionCard","setCards","buttonSave","setButtonSave","buttonCreate","setButtonCreate","buttonDelete","setButtonDelete","isButtonSaveUser","setIsButtonSaveUser","isButtonSavePlace","setIsButtonSavePlace","isButtonSaveAvatar","setIsButtonSaveAvatar","setIsloading","getUser","catch","err","getInitialCards","handleButtonState","setButton","boolean","escClose","evt","key","closeAllPopups","handleEscClose","document","addEventListener","handlePressingMouse","classList","contains","removeEventListener","Provider","changeLikeCardStatus","newCard","state","c","editUserInfo","addCard","changeAvatar","removeCard","newCards","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4d630e2b.chunk.js","sourcesContent":["function Header() {\n  return (\n    <header className=\"header\">\n      <div className=\"header__logo\"></div>\n    </header>\n  )\n}\n\nexport default Header;\n","import React from \"react\";\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction Card(props) {\n\n  const currentUser = React.useContext(CurrentUserContext)\n  const card = props.card;\n  const isOwn = card.owner._id === currentUser._id;\n  const basketButtonClassName = (\n    `elements__basket ${isOwn ? '': 'elements__basket_hidden'}`\n  )\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = (`elements__like ${isLiked ?'elements_like_active' : '' }`)\n  const handleCardClick = () => {\n    props.onCardClick(card)\n  }\n\n  const handleLikeClick = () => {\n    props.onCardLike(card);\n  }\n\n\n  const handleDeleteClick = () => {\n    props.onBasketClick();\n    props.onCardDelete(card);\n  }\n\n  return(\n    <li className=\"elements__item\" >\n      <div style={{ backgroundImage: `url(${card.link})`, backgroundPosition: \"center\", backgroundRepeat: \"no-repeat\", backgroundSize:\"cover\" }}\n           alt=\"Что-то с ссылкой на изображение\"\n           className=\"elements__image\"\n           onClick={handleCardClick}\n      />\n      <button type=\"button\" className={basketButtonClassName} onClick={handleDeleteClick}></button>\n      <div className=\"elements__group\">\n        <h2 className=\"elements__title\">{card.name}</h2>\n        <div className=\"elements__group-like\">\n          <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick} aria-label=\"Нравится\"></button>\n          <p className=\"elements__like-count\">{card.likes.length}</p>\n        </div>\n      </div>\n    </li>\n  )\n};\n\nexport default Card;\n\n\n","import React from \"react\";\nimport Card from \"./Card\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\nfunction Main(props) {\n\n  const currentUser = React.useContext(CurrentUserContext)\n\n  return(\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__user\">\n          <div className=\"profile__photo-group\" onClick={props.onEditAvatar}>\n            <img\n              src={currentUser.avatar}\n              alt=\"Изображение профиля\"\n              className=\"profile__photo\"\n            />\n          </div>\n          <div className=\"profile__info\">\n            <div className=\"profile__main-info\">\n              <h1 className=\"profile__title\">{currentUser.name}</h1>\n              <button type=\"button\" className=\"profile__button-edit\" aria-label=\"Редактировать\" onClick={props.onEditProfile}></button>\n            </div>\n            <p className=\"profile__subtitle\">{currentUser.about}</p>\n          </div>\n          <button type=\"button\" className=\"profile__button-add\" aria-label=\"Добавить\" onClick={props.onAddPlace}></button>\n        </div>\n      </section>\n\n      <section className=\"elements\">\n        <div className={`${props.isLoading && 'loading'}`}></div>\n        <ul className=\"elements__list\">\n          {props.cards.map((item) =>(\n              <Card\n                key={item._id}\n                card={item}\n                onCardLike = {props.onCardLike}\n                onCardDelete = {props.onCardDelete}\n                onCardClick={props.onCardClick}\n                onBasketClick={props.onBasketClick}\n              />\n          ))}\n        </ul>\n      </section>\n    </main>\n  )\n}\n\nexport default Main;\n","function Footer() {\n  return(\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 - {new Date().getFullYear()} Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React from \"react\";\n\nfunction ImagePopup(props) {\n  const {link} =props.card\n  const classNameOpen = props.isOpen ? 'popup_visible' : '';\n\n  React.useEffect(() => {\n    props.onEscClose(props.isOpen);\n  },[props.isOpen, props.card, props.onEscClose])\n\n  return(\n    <div className={`popup popup_image ${classNameOpen}`} onClick={props.onOverlayClose}>\n      <figure className=\"popup__image-container\">\n        <button\n          type=\"button\"\n          className=\"popup__button-close popup__button-close_image\"\n          aria-label=\"Закрыть\"\n          onClick={props.onClose}\n        >\n        </button>\n        <img src={link}   alt=\"Выбранное изображение\" className=\"popup__image\"  />\n        <figcaption className=\"popup__image-title\">{props.card.name}</figcaption>\n      </figure>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","import React from \"react\";\nfunction PopupWithForm(props) {\n  const classNameOpen = props.isOpen ? 'popup_visible' : '';\n  const buttonInactive = props.isButtonActive ? '' : 'popup__button-save_inactive'\n  const [buttonDisabled, setButtonDisabled] = React.useState(false);\n  const elementsRef = React.useRef()\n\n  React.useEffect(() => {\n    if(elementsRef.current && elementsRef.current.checkValidity()) {\n      props.onButtonActive(true)\n      setButtonDisabled(false);\n    }else{\n      props.onButtonActive(false)\n      setButtonDisabled(true);\n    }\n  },)\n\n  React.useEffect(() => {\n    props.onEscClose(props.isOpen);\n  },[props.isOpen, props.onEscClose])\n\n\n  return(\n    <div className={`popup popup_validation popup_${props.name} ${classNameOpen}`} onClick={props.onOverlayClose}>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__button-close popup__button-close_edit\" aria-label=\"Закрыть\" onClick={props.onClose}></button>\n        <form ref={elementsRef} action=\"pages/index.js\" className=\"popup__form\" name={`form_${props.name}`} noValidate onSubmit={props.onSubmit}>\n          {props.children}\n          <button type=\"submit\" disabled={buttonDisabled} className={`popup__button-save popup__button-save_${props.name} ${buttonInactive} ${props.buttonTitle.load && 'popup__button-save_loading'}`} aria-label=\"Сохранить\">{props.buttonTitle.title}</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\n\nconst Input = React.memo((props) => {\n  const [errorMessage, setErrorMessage] = React.useState('');\n\n  const handleChange = (e) => {\n    console.log(e.target.value.trim().length)\n    console.log(e.target.value.trim().length < 2 )\n    props.onChange(e)\n    if(e.target.value.trim().length < 2 && e.target.validationMessage === ''){\n      setErrorMessage('Нужно как минимум 2 символа');\n    }else{\n      setErrorMessage(e.target.validationMessage);\n    }\n  }\n\n  React.useEffect(() => {\n    if(!props.isOpen) setErrorMessage('');\n  },[props.isOpen])\n  return (\n    <>\n      <input\n        id={`${props.name}-input`}\n        type={props.type}\n        className={`popup__form-input popup__form-input_field_${props.name}`}\n        name={props.name}\n        placeholder={props.placeholder}\n        minLength={props.minLength}\n        maxLength={props.maxLength}\n        required\n        autoComplete=\"off\"\n        value={props.value}\n        onChange={handleChange}\n        onPaste={handleChange}\n        contentEditable={true}\n      />\n      <span className={`${props.name}-input-error popup__form-error popup__form-error_active`}>\n        {errorMessage}\n      </span>\n    </>\n  );\n})\n\nexport default Input;\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\nimport Input from \"./Input\";\nfunction EditProfilePopup(props) {\n\n  const [name, setName]  = React.useState('вв');\n  const [description, setDescription] = React.useState( '');\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleChangeName(e) {\n   setName(e.target.value)\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value)\n  }\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, props.isOpen]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name: name.trim(),\n      about: description.trim(),\n    });\n  }\n\n  return(\n    <PopupWithForm\n      name='edit'\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onEscClose={props.onEscClose}\n      onOverlayClose={props.onOverlayClose}\n      buttonTitle={props.buttonTitle}\n      onSubmit={handleSubmit}\n      isButtonActive={props.isButtonActive}\n      onButtonActive={props.onButtonActive}\n      children={(\n      <>\n        <h2 className=\"popup__title\">Редактировать профиль</h2>\n        <label className=\"popup__form-field\">\n          <Input\n            name='name'\n            type='text'\n            placeholder='Имя'\n            minLength='2'\n            maxLength='40'\n            xName={name}\n            value={name || ''}\n            onChange={handleChangeName}\n            isOpen={props.isOpen}\n            isButtonActive={props.isButtonActive}\n            onButtonActive={props.onButtonActive}\n            />\n        </label>\n        <label className=\"popup__form-field\">\n          <Input\n            name='about'\n            type='text'\n            placeholder='Имя'\n            minLength='2'\n            maxLength='200'\n            xName={description}\n            value={description || ''}\n            onChange={handleChangeDescription}\n            isOpen={props.isOpen}\n            isButtonActive={props.isButtonActive}\n            onButtonActive={props.onButtonActive}\n          />\n        </label>\n      </>\n    )}\n    />\n  )\n}\n\nexport default EditProfilePopup;\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\nimport Input from \"./Input\";\nfunction AddPlacePopup(props) {\n  const [title, setTitle] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  const handleChangeTitle = (e) => {\n    setTitle(e.target.value)\n  }\n\n  const handleChangeLink = (e) => {\n    setLink(e.target.value)\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    props.onAddPlace(title, link)\n  }\n\n  React.useEffect(() => {\n    setTitle('');\n    setLink('');\n  },[props.isOpen])\n  return(\n    <PopupWithForm\n      name='add'\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onEscClose={props.onEscClose}\n      onOverlayClose={props.onOverlayClose}\n      buttonTitle={props.buttonTitle}\n      onButtonActive={props.onButtonActive}\n      isButtonActive={props.isButtonActive}\n      onSubmit={handleSubmit}\n      children={(\n        <>\n          <h2 className=\"popup__title popup__title_place\">Новое место</h2>\n          <label className=\"popup__form-field\">\n            <Input\n              name='name'\n              type='text'\n              placeholder='Название'\n              minLength='2'\n              maxLength='30'\n              value={title || ''}\n              xName={title}\n              isOpen={props.isOpen}\n              onChange={handleChangeTitle}\n              isButtonActive={props.isButtonActive}\n              onButtonActive={props.onButtonActive}\n              />\n          </label>\n          <label className=\"popup__form-field\">\n            <Input\n              name='link'\n              type='url'\n              placeholder='Ссылка на картинку'\n              value={link || ''}\n              onChange={handleChangeLink}\n              isOpen={props.isOpen}\n              xName={link}\n              isButtonActive={props.isButtonActive}\n              onButtonActive={props.onButtonActive}\n            />\n          </label>\n        </>\n      )}\n    />\n  )\n}\n\nexport default AddPlacePopup;\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\nimport Input from \"./Input\";\nfunction EditAvatarPopup(props) {\n\nconst [link, setLink] = React.useState('');\n  function handleChangeLink(e) {\n    setLink(e.target.value)\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar(link)\n  }\n  React.useEffect(() => {\n    setLink('');\n  },[props.isOpen])\n  return(\n    <PopupWithForm\n      name='avatar'\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onEscClose={props.onEscClose}\n      onOverlayClose={props.onOverlayClose}\n      buttonTitle={props.buttonTitle}\n      isButtonActive={props.isButtonActive}\n      onButtonActive={props.onButtonActive}\n      onSubmit={handleSubmit}\n      children={(\n        <>\n          <h2 className=\"popup__title popup__title_place\">Обновить аватар</h2>\n          <label className=\"popup__form-field\">\n            <Input\n              name='avatar'\n              type='url'\n              placeholder='Ссылка на картинку'\n              value={link || ''}\n              isOpen={props.isOpen}\n              onChange={handleChangeLink}\n              isButtonActive={props.isButtonActive}\n              onButtonActive={props.onButtonActive}\n            />\n          </label>\n        </>\n      )}\n    />\n  )\n};\n\nexport default EditAvatarPopup;\n","import React from \"react\";\n\nfunction CardDeletePopup(props) {\n  const card = props.card;\n  const classNameOpen = props.isOpen ? 'popup_visible' : '';\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    props.onCardDelete(card)\n  }\n  React.useEffect(() => {\n    props.onEscClose(props.isOpen);\n  },[props.isOpen])\n  return(\n    <div className={`popup popup_delete ${classNameOpen}`} onClick={props.onOverlayClose}>\n      <div className=\"popup__container\">\n        <p className=\"popup__delete-text\">Вы уверены?</p>\n        <button className={`popup__button-save popup__button-save_verification ${props.buttonTitle.load && 'popup__button-save_loading'}`} onClick={handleSubmit}>{props.buttonTitle.title}</button>\n        <button type=\"button\" className=\"popup__button-close\" onClick={props.onClose}></button>\n      </div>\n    </div>\n  )\n}\n\nexport default CardDeletePopup;\n","export class Api {\n\n  constructor( {baseUrl, headers}) {\n    const {authorization, contentType} = headers;\n    this._baseUrl = baseUrl;\n    this._authorization = authorization;\n    this._contentType = contentType;\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`,\n      {\n        headers: {\n          authorization: this._authorization,\n          'Content-Type': this._contentType,\n        }\n      }\n    )\n      .then(res => {\n        if (!res.ok){\n          return Promise.reject(res.status)\n        } else{\n          return res.json();\n        }\n      })\n  }\n\n  getUser() {\n    return fetch(`${this._baseUrl}/users/me`,\n      {\n        headers:{\n          authorization: this._authorization,\n          'Content-Type': this._contentType,\n        }\n      }\n    )\n      .then(res => {\n        if (!res.ok){\n          return Promise.reject(res.status)\n        } else{\n            return res.json();\n        }\n      })\n  }\n\n  editUserInfo(name, about) {\n    return fetch(`${this._baseUrl}/users/me`,{\n      method: 'PATCH',\n      headers: {\n        authorization: this._authorization,\n        'Content-Type': this._contentType,\n      },\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n      .then(res => {\n        if (!res.ok){\n          return Promise.reject(res.status)\n        } else{\n          return res.json();\n        }\n      })\n  }\n\n  addCard(name, link) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._authorization,\n        'Content-Type': this._contentType,\n      },\n      body: JSON.stringify({\n        name: name,\n        link: link,\n      })\n    })\n      .then(res => {\n        if (!res.ok){\n          return Promise.reject(res.status)\n        } else{\n          return res.json();\n        }\n      })\n  }\n\n  putLike(_id) {\n    return fetch(`${this._baseUrl}/cards/likes/${_id}`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._authorization,\n        'Content-Type': this._contentType,\n      }\n    })\n      .then(res => {\n        if (!res.ok){\n          return Promise.reject(res.status)\n        } else{\n          return res.json();\n        }\n      })\n  }\n\n  removeLike(_id) {\n    return fetch(`${this._baseUrl}/cards/likes/${_id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._authorization,\n        'Content-Type': this._contentType,\n      }\n    })\n      .then(res => {\n        if (!res.ok){\n          return Promise.reject(res.status)\n        } else{\n          return res.json();\n        }\n      })\n  }\n\n  removeCard(_id) {\n    return fetch(`${this._baseUrl}/cards/${_id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._authorization,\n        'Content-Type': this._contentType,\n      },\n    })\n      .then(res => {\n        if (!res.ok){\n          return Promise.reject(res.status)\n        } else{\n          return res.json();\n        }\n      })\n  }\n\n  changeAvatar(avatar) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._authorization,\n        'Content-Type': this._contentType,\n      },\n      body: JSON.stringify({\n        avatar: avatar,\n      })\n    })\n      .then(res => {\n        if (!res.ok){\n          return Promise.reject(res.status)\n        } else{\n          return res.json();\n        }\n      })\n  }\n  changeLikeCardStatus(_id, isLiked) {\n    if(isLiked) {\n      return  this.removeLike(_id);\n    }else {\n      return this.putLike(_id);\n    }\n  }\n}\n\n\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-20',\n  headers: {\n    authorization: '1ab383b2-76d9-452f-83da-c9ac4a4eb776',\n    contentType: 'application/json'\n  }\n});\n\nexport default api;\n","import React from \"react\";\nimport '../App.css';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport CardDeletePopup from \"./CardDeletePopup\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\nimport api from \"../utils/api\";\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isCardDeletePopupOpen, setIsCardDeletePopupOpen] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState({link:'', name: ''});\n  const [isPopupWithImageOpen, setIsPopupWithImageOpen] = React.useState(false)\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [selectedDeletionCard, setSelectedDeletionCard] = React.useState('')\n  const [cards, setCards] = React.useState([])\n\n  const [buttonSave, setButtonSave] = React.useState({load: false, title: 'Сохранить'});\n  const [buttonCreate, setButtonCreate] = React.useState({load: false, title: 'Создать'});\n  const [buttonDelete, setButtonDelete] = React.useState({load: false, title: 'Да'})\n\n  const [isButtonSaveUser, setIsButtonSaveUser] = React.useState(false);\n  const [isButtonSavePlace, setIsButtonSavePlace] = React.useState(false);\n  const [isButtonSaveAvatar, setIsButtonSaveAvatar] = React.useState(false);\n\n  const [isLoading, setIsloading] = React.useState(false);\n\n  const handleStateButtonEdit = (boolean) => {\n    setIsButtonSaveUser(boolean);\n  }\n\n  const handleStateButtonPlace = (boolean) => {\n    setIsButtonSavePlace(boolean);\n  }\n\n  const handleStateButtonAvatar = (boolean) => {\n    setIsButtonSaveAvatar(boolean);\n  }\n\n  React.useEffect(() =>{\n    api.getUser()\n      .then((res) => {\n        setCurrentUser(res);\n      },)\n      .catch(err => console.log(err))\n    setIsloading(true)\n    api.getInitialCards()\n      .then((res) => {\n        setCards(res);\n        setIsloading(false)\n        console.log(res)\n      })\n      .catch(err => console.log(err))\n  },[])\n\n  const handleButtonState = (setButton, boolean ,buttonTitle) => {\n    setButton({load: boolean, title: buttonTitle});\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(err => console.log(err));\n  }\n\n  function handleCardDelete(card) {\n    handleButtonState(setButtonDelete, true, 'Удаление...')\n    api.removeCard(card._id)\n      .then((res) => {\n        const newCards = cards.filter(newCard => newCard._id !== card._id);\n        setCards(newCards);\n        closeAllPopups();\n        handleButtonState(setButtonDelete, true, 'Да')\n      })\n      .catch(err => console.log(err))\n  }\n\n  const handleAddPlace = (name, link) => {\n    handleButtonState(setButtonCreate,true, 'Создание...')\n    api.addCard(name, link)\n      .then(res => {\n        setCards([res, ...cards]);\n        closeAllPopups();\n        handleButtonState(setButtonCreate,false, 'Создать')\n      })\n      .catch(err => console.log(err))\n  }\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n    setIsPopupWithImageOpen(true)\n  }\n\n  const handleDeleteSelectedCard = (card) => {\n    setSelectedDeletionCard(card);\n  }\n\n  const handleBasketClick = () => {\n    setIsCardDeletePopupOpen(!isCardDeletePopupOpen);\n  }\n\n  const escClose = (evt) => {\n      if (evt.key === 'Escape') {\n        closeAllPopups();\n      }\n  }\n\n  const handleEscClose = (isOpen) => {\n    if(isOpen) document.addEventListener('keydown', escClose);\n  }\n\n  const handlePressingMouse = (evt) => {\n      if (evt.target.classList.contains('popup')) {\n        closeAllPopups();\n      }\n  }\n\n  //Параметры передаются для плавного закрытия попапа с изображением\n  const closeAllPopups = () => {\n    document.removeEventListener(\"keydown\", escClose)\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsCardDeletePopupOpen(false);\n    setIsPopupWithImageOpen(false);\n  }\n\n  const handleUpdateUser = ({name, about}) => {\n    handleButtonState(setButtonSave, true,'Сохранение...')\n    api.editUserInfo(name, about)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n        handleButtonState(setButtonSave, false,'Сохранение...')\n      })\n  }\n\n  const handleUpdateAvatar = (avatar) => {\n    handleButtonState(setButtonSave, true,'Сохранение...')\n    api.changeAvatar(avatar)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n        handleButtonState(setButtonSave, false,'Сохранение...')\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <div className=\"page\">\n          <Header />\n          <Main\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onBasketClick={handleBasketClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleDeleteSelectedCard}\n            isLoading={isLoading}\n          />\n          <Footer />\n        </div>\n        <EditProfilePopup\n          name='edit'\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onEscClose={handleEscClose}\n          onOverlayClose={handlePressingMouse}\n          onUpdateUser={handleUpdateUser}\n          onButtonActive={handleStateButtonEdit}\n          isButtonActive={isButtonSaveUser}\n          buttonTitle={buttonSave}\n\n        />\n        <AddPlacePopup\n          name='add'\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onEscClose={handleEscClose}\n          onOverlayClose={handlePressingMouse}\n          onAddPlace={handleAddPlace}\n          buttonTitle={buttonCreate}\n          onButtonActive={handleStateButtonPlace}\n          isButtonActive={isButtonSavePlace}\n        />\n        <EditAvatarPopup\n          name='avatar'\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onEscClose={handleEscClose}\n          onOverlayClose={handlePressingMouse}\n          buttonTitle={buttonSave}\n          onUpdateAvatar={handleUpdateAvatar}\n          onButtonActive={handleStateButtonAvatar}\n          isButtonActive={isButtonSaveAvatar}\n        />\n        <CardDeletePopup\n          isOpen={isCardDeletePopupOpen}\n          onClose={closeAllPopups}\n          onEscClose={handleEscClose}\n          onOverlayClose={handlePressingMouse}\n          onCardDelete={handleCardDelete}\n          card={selectedDeletionCard}\n          buttonTitle={buttonDelete}\n        />\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n          onEscClose={handleEscClose}\n          isOpen={isPopupWithImageOpen}\n          onOverlayClose={handlePressingMouse}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}